<!DOCTYPE html>
<html lang="en-us">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="Website Description">

<base href="/">
<title>


     Trajectory tracking controller 

</title>
<link rel="canonical" href="/blog/trajectory-tracking-controller/">







<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>



<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>


<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500|Work+Sans">



    
    <link rel="stylesheet" href="/css/light-style.css?t=1512759564">
    




<link rel="shortcut icon"

    href="/img/fav.ico"

>








</head>

<body lang="en">
  

<div class="section" id="top">

    <div class="container hero ">
    <h1 class="bold-title is-1">Robotics Blog</h1>
    </div>


<div class="section ">

    <div class="container">
    <hr>
<nav class="nav nav-center">
    <span id="nav-toggle" class="nav-toggle"  onclick="document.getElementById('nav-menu').classList.toggle('is-active');">
      <span></span>
      <span></span>
      <span></span>
    </span>
    <div id="nav-menu" class="nav-left nav-menu">
      <span class="nav-item">
        <a href="/">Main</a>
      </span>
      <span class="nav-item">
        <a href="/#about">About</a> 
      </span>
    
    
      <span class="nav-item">
        <a href="/#blog">Back to blog</a> 
      </span>
    
      <span class="nav-item">
        <a href="/#contact">Contact</a>
      </span>
    
      <span class="nav-item">
        <a href="/index.xml"><i class="fa fa-rss"></i></a>
      </span>
    
    </div>
</nav>
<hr>
    </div>

    <div class="container ">
        <h2 class="title is-1 top-pad strong-post-title"><a href="/blog/trajectory-tracking-controller/">Trajectory tracking controller</a></h2>
            <div class="post-data">
                Dec 1, 2017 |
                2 minutes read
            </div>

            
                <div class="blog-share">
                Share this:
                <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Read%20Trajectory%20tracking%20controller%20%2fblog%2ftrajectory-tracking-controller%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
                <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=%2fblog%2ftrajectory-tracking-controller%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
                <span class="hidden">Facebook</span>
                </a>
                <a class="icon-pinterest" href="http://pinterest.com/pin/create/button/?url=%2fblog%2ftrajectory-tracking-controller%2f&amp;description=Trajectory%20tracking%20controller"
                onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
                <i class="fa fa-pinterest"></i>
                <span class="hidden">Pinterest</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=%2fblog%2ftrajectory-tracking-controller%2f"
                onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                <i class="fa fa-linkedin"></i>
                <span class="hidden">Google+</span>
                </a>
                </div>
            

    </div>

    <div class="container markdown  top-pad">
        

<p>Having a KUKA LBR4 robot in my current lab, I wanted to setup a ROS interface to run joint space trajectories on the robot. The goal is to given a joint space position trajectory, the robot should track the trajectory accurately. This joint space trajectory can be obtained from motion planners, a simple interface would be to use move-it to obtain a joint space trajectory. I have setup a Sequential Quadratic Program (SQP) to generate a joint space position trajectory to move the robot from the current joint configuration to a desired cartesian pose for the end-effector. Details on this can be dealt with later. This article focuses on setting up a trajectory tracking controller for the KUKA robot which could also be implemented on other robots. Before we get into the controllers, we will talk about the robot home position and the testing schema.</p>

<p>The robot home position is usually at a position where the joints have to exert minimum torque to maintain the position. For a ground mounted KUKA lbr4, this would be
<img src="/static/img/robot_control/zero_js.png" alt="Home position" />
However, changing the joint angles from this position is a highly non-linear control problem as there would sudden increase in the torques required and hence we move away from this home position and define a new home position which would not have this non-linearity.
<img src="/static/img/robot_control/new_initial.png" alt="New home position" />
We test our controllers from this new home position. In the real robot, we move the robot from the home position to the new home position by a KRL program or by manually jogging.</p>

<h1 id="testing">Testing</h1>

<h2 id="trajectory">Trajectory</h2>

<h1 id="controllers">Controllers</h1>

<p>A simple controller is to setup a PD position controller with gravity compensation for the joints.</p>

<p>PD + grav controller</p>

<p>PD + grav + coriollis terms</p>

<p>PD + inv dynamics controller</p>

<p>PD + inv dyn + feedforward torque controller</p>

<p>desired velocity controller</p>

    </div>

    <div class="disqus">
        
    </div>

<div class="container has-text-centered top-pad">
<hr>
<a href="/blog/trajectory-tracking-controller/#top"><i class="fa fa-arrow-up"></i></a>
<hr>
</div>

<div class="section" id="footer">
    <div class="container has-text-centered">
        
             
        
    </div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" async src="path-to-mathjax/MathJax.js?config=TeX-AMS_CHTML"></script>

<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</div>
</div>


<script>
$('a[href^="\/blog\/trajectory-tracking-controller\/#"]').click(function(e) {
    e.preventDefault();
    var target = this.hash;
    $('html, body').animate({
    scrollTop: $(target).offset().top
    }, 500);
    return false;
})
</script>
